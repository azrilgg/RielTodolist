<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üóìÔ∏è Riel TodoList Elegant Manager</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <meta name="description" content="Modern, elegant task management with glassmorphism design">
  <meta name="theme-color" content="#1e293b">
  <style>
        /* CSS Variables for Theme System */
        :root {
            /* Light Theme */
            --bg-light: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            --panel-bg-light: rgba(255, 255, 255, 0.8);
            --panel-glass-light: rgba(255, 255, 255, 0.1);
            --text-primary-light: #1e293b;
            --text-muted-light: #64748b;
            --glass-border-light: rgba(255, 255, 255, 0.2);
            
            /* Dark Theme */
            --bg-dark: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --panel-bg-dark: rgba(15, 23, 42, 0.8);
            --panel-glass-dark: rgba(255, 255, 255, 0.05);
            --text-primary-dark: #f1f5f9;
            --text-muted-dark: #94a3b8;
            --glass-border-dark: rgba(255, 255, 255, 0.1);
            
            /* Special Theme */
            --bg-special: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            --panel-bg-special: rgba(102, 126, 234, 0.2);
            --panel-glass-special: rgba(255, 255, 255, 0.1);
            --text-primary-special: #ffffff;
            --text-muted-special: rgba(255, 255, 255, 0.8);
            --glass-border-special: rgba(255, 255, 255, 0.2);
            
            /* Accent Colors */
            --accent-blue: #3b82f6;
            --accent-gold: #f59e0b;
            --accent-blue-glow: rgba(59, 130, 246, 0.3);
            --accent-gold-glow: rgba(245, 158, 11, 0.3);
            
            /* Status Colors */
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            
            /* Glass Effects */
            --glass-blur: blur(20px);
            --box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
            --radius-2xl: 1rem;
            
            /* Transitions */
            --transition-fast: 0.15s ease-out;
            --transition-medium: 0.3s ease-out;
            --transition-slow: 0.5s ease-out;
            
            /* Typography */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        /* Theme Classes */
        .theme-light {
            --bg: var(--bg-light);
            --panel-bg: var(--panel-bg-light);
            --panel-glass: var(--panel-glass-light);
            --text-primary: var(--text-primary-light);
            --text-muted: var(--text-muted-light);
            --glass-border: var(--glass-border-light);
        }

        .theme-dark {
            --bg: var(--bg-dark);
            --panel-bg: var(--panel-bg-dark);
            --panel-glass: var(--panel-glass-dark);
            --text-primary: var(--text-primary-dark);
            --text-muted: var(--text-muted-dark);
            --glass-border: var(--glass-border-dark);
        }

        .theme-special {
            --bg: var(--bg-special);
            --panel-bg: var(--panel-bg-special);
            --panel-glass: var(--panel-glass-special);
            --text-primary: var(--text-primary-special);
            --text-muted: var(--text-muted-special);
            --glass-border: var(--glass-border-special);
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100%;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            background: var(--bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100%;
            transition: all var(--transition-medium);
            overflow-x: hidden;
            box-sizing: border-box;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus Management */
        *:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Glass Panel Base */
        .glass-panel {
            background: var(--panel-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-2xl);
            box-shadow: var(--box-shadow);
            transition: all var(--transition-medium);
        }

        .glass-panel:hover {
            box-shadow: var(--box-shadow-hover);
            transform: translateY(-2px);
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
            background: var(--panel-bg);
            backdrop-filter: var(--glass-blur);
            border-bottom: 1px solid var(--glass-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .branding {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 2rem;
            filter: drop-shadow(0 0 10px var(--accent-blue-glow));
        }

        .app-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .theme-selector {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .theme-selector:hover {
            background: var(--panel-bg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .icon-btn {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.75rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
        }

        .icon-btn:hover {
            background: var(--panel-bg);
            box-shadow: 0 0 20px var(--accent-blue-glow);
            transform: scale(1.05);
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Statistics Panel */
        .stats-panel {
            padding: 1.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            text-align: center;
            padding: 1rem;
            background: var(--panel-glass);
            border-radius: 0.75rem;
            border: 1px solid var(--glass-border);
            transition: all var(--transition-medium);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .progress-card {
            position: relative;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-gold));
            border-radius: 4px;
            transition: width var(--transition-slow), box-shadow var(--transition-medium);
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 2s infinite;
        }

        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            align-items: start;
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 120px;
        }

        .add-task-panel {
            padding: 1.5rem;
        }

        .panel-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Forms */
        .task-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all var(--transition-fast);
            min-height: 44px;
        }

        .form-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px var(--accent-blue-glow);
            background: var(--panel-bg);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-help {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .error-message {
            font-size: 0.75rem;
            color: var(--danger);
            min-height: 1rem;
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-gold));
            border: none;
            border-radius: 0.75rem;
            padding: 0.875rem 1.5rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 44px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            min-height: 44px;
        }

        .btn-secondary:hover {
            background: var(--panel-bg);
            transform: translateY(-1px);
        }

        .btn-danger {
            background: var(--danger);
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            min-height: 44px;
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .glow-btn {
            position: relative;
        }

        .glow-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-gold));
            border-radius: inherit;
            opacity: 0;
            transition: opacity var(--transition-medium);
            z-index: -1;
            filter: blur(10px);
        }

        .glow-btn:hover::before {
            opacity: 0.7;
        }

        /* Content Area */
        .content-area {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Filters Panel */
        .filters-panel {
            padding: 1.5rem;
        }

        .search-section {
            margin-bottom: 1rem;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            flex: 1;
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.75rem;
            padding: 0.875rem 1rem;
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all var(--transition-fast);
            min-height: 44px;
        }

        .search-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px var(--accent-blue-glow);
            background: var(--panel-bg);
        }

        .clear-btn {
            position: absolute;
            right: 0.5rem;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .clear-btn:hover {
            color: var(--text-primary);
            background: var(--panel-glass);
        }

        .filter-section {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }

        .filter-select {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            min-height: 40px;
        }

        .filter-select:hover {
            background: var(--panel-bg);
        }

        /* Task List */
        .task-list-container {
            background: var(--panel-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-2xl);
            padding: 1.5rem;
        }

        .task-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .task-count {
            font-size: 0.875rem;
            color: var(--text-muted);
            background: var(--panel-glass);
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            border: 1px solid var(--glass-border);
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .task-card {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.75rem;
            padding: 1.25rem;
            transition: all var(--transition-medium);
            position: relative;
            overflow: hidden;
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: var(--accent-blue);
        }

        .task-card.completed {
            opacity: 0.7;
        }

        .task-card.completed .task-title {
            text-decoration: line-through;
        }

        .task-card.overdue {
            border-left: 4px solid var(--danger);
        }

        .task-card.urgent {
            border-left: 4px solid var(--danger);
        }

        .task-card.high {
            border-left: 4px solid #f97316;
        }

        .task-card.medium {
            border-left: 4px solid var(--warning);
        }

        .task-card.low {
            border-left: 4px solid var(--success);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .task-content {
            flex: 1;
            margin-right: 1rem;
        }

        .task-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .task-description {
            font-size: 0.875rem;
            color: var(--text-muted);
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .task-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }

        .task-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
        }

        .task-badge.category {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.2);
        }

        .task-badge.priority {
            background: rgba(245, 158, 11, 0.1);
            color: var(--accent-gold);
            border-color: rgba(245, 158, 11, 0.2);
        }

        .task-badge.deadline {
            background: rgba(107, 114, 128, 0.1);
            color: var(--text-muted);
            border-color: rgba(107, 114, 128, 0.2);
        }

        .task-badge.overdue {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border-color: rgba(239, 68, 68, 0.2);
        }

        .task-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .task-tag {
            padding: 0.125rem 0.5rem;
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .task-actions {
            display: flex;
            gap: 0.5rem;
            align-items: flex-start;
        }
        
        .task-action-btn {
            background: var(--panel-glass);
            border: 1px solid var(--glass-border);
            border-radius: 0.5rem;
            padding: 0.5rem;
            color: var(--text-muted);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 36px;
            min-height: 36px;
        }

        .task-action-btn:hover {
            background: var(--panel-bg);
            color: var(--text-primary);
            transform: scale(1.1);
        }

        .task-action-btn.complete {
            color: var(--success);
        }

        .task-action-btn.complete:hover {
            background: rgba(16, 185, 129, 0.1);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }

        .task-action-btn.edit {
            color: var(--accent-blue);
        }

        .task-action-btn.edit:hover {
            background: rgba(59, 130, 246, 0.1);
            box-shadow: 0 0 15px var(--accent-blue-glow);
        }

        .task-action-btn.delete {
            color: var(--danger);
        }

        .task-action-btn.delete:hover {
            background: rgba(239, 68, 68, 0.1);
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .empty-state-description {
            font-size: 0.875rem;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
            padding: 1rem;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 1.5rem;
            transform: scale(0.9) translateY(20px);
            transition: transform var(--transition-medium);
        }

        .modal.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal-actions .btn-secondary {
            flex: 1;
        }

        .modal-actions .btn-primary {
            flex: 2;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: var(--text-primary);
            background: var(--panel-glass);
        }

        /* Settings Panel */
        .settings-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--panel-bg);
            backdrop-filter: var(--glass-blur);
            border-left: 1px solid var(--glass-border);
            z-index: 1000;
            transition: right var(--transition-medium);
            overflow-y: auto;
        }

        .settings-panel.active {
            right: 0;
        }

        .settings-content {
            height: 100%;
            border-radius: 0;
            border: none;
            border-left: 1px solid var(--glass-border);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .settings-body {
            padding: 1.5rem;
        }

        .settings-section {
            margin-bottom: 2rem;
        }

        .settings-section-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .settings-actions {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .import-section {
            position: relative;
        }

        .theme-preview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .theme-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 1px solid var(--glass-border);
        }

        .theme-option:hover {
            background: var(--panel-glass);
            transform: translateY(-2px);
        }

        .theme-sample {
            width: 60px;
            height: 40px;
            border-radius: 0.5rem;
            border: 1px solid var(--glass-border);
        }

        .theme-sample-light {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .theme-sample-dark {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        .theme-sample-special {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }

        /* Notifications */
        .notifications-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1100;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-width: 400px;
        }
        
        .notification {
            background: var(--panel-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            box-shadow: var(--box-shadow);
            transform: translateX(100%);
            transition: all var(--transition-medium);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-height: 60px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--danger);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.info {
            border-left: 4px solid var(--info);
        }

        .notification-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .notification-message {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 0.25rem;
            transition: all var(--transition-fast);
        }

        .notification-close:hover {
            color: var(--text-primary);
            background: var(--panel-glass);
        }
        
        /* Loading */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(2px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--panel-glass);
            border-top: 3px solid var(--accent-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px var(--accent-blue-glow);
                
            }
            50% {
                box-shadow: 0 0 20px var(--accent-blue-glow), 0 0 30px var(--accent-blue-glow);
            }
        }

        /* Utility Classes */
        .pulse {
            animation: pulse 2s infinite;
        }

        .glow {
            animation: glow 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        .slide-in-right {
            animation: slideInRight 0.3s ease-out;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .sidebar {
                position: static;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .branding {
                justify-content: center;
            }
            
            .header-controls {
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .task-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .task-content {
                margin-right: 0;
            }
            
            .task-actions {
                align-self: flex-end;
            }
            
            .settings-panel {
                width: 100%;
                right: -100%;
            }
            
            .modal {
                padding: 0.5rem;
            }
            
            .notifications-container {
                left: 1rem;
                right: 1rem;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 0.5rem;
            }
            
            .glass-panel {
                border-radius: 1rem;
            }
            
            .task-meta {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
        
        /* High Contrast Mode */
        @media (prefers-contrast: high) {
            :root {
                --glass-border-light: #000000;
                --glass-border-dark: #ffffff;
                --glass-border-special: #ffffff;
            }
            
            .glass-panel {
                border-width: 2px;
            }
        }

        /* Print Styles */
        @media print {
            .header-controls,
            .task-actions,
            .settings-panel,
            .notifications-container,
            .modal {
                display: none !important;
            }
            
            .glass-panel {
                background: white !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
            }
            
            .task-card {
                break-inside: avoid;
                margin-bottom: 1rem;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body class="theme-dark"><!-- Header -->
  <header class="header" role="banner">
   <div class="header-content">
    <div class="branding">
     <div class="logo" aria-hidden="true">
      üóìÔ∏è
     </div>
     <div class="brand-text">
      <h1 class="app-title">Riel TodoList Elegant Manager</h1>
      <p class="tagline">Manage your tasks elegantly</p>
     </div>
    </div>
    
    <div class="header-controls"><select id="theme-selector" class="theme-selector" aria-label="Select theme"> <option value="light">‚òÄÔ∏è Light</option> <option value="dark" selected>üåô Dark</option> <option value="special">‚ú® Special</option> </select> <button id="settings-btn" class="icon-btn" aria-label="Open settings" title="Settings">
      <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle> <path d="m12 1 0 6m0 6 0 6"></path> <path d="m17.5 6.5-3 3m-3 3-3 3"></path> <path d="m6.5 6.5 3 3m3 3 3 3"></path>
      </svg></button>
    </div>
   </div>
  </header><!-- Main Content -->
  <main class="main-content" role="main"><!-- Statistics Panel -->
   <section class="stats-panel glass-panel" aria-labelledby="stats-heading">
    <h2 id="stats-heading" class="sr-only">Task Statistics</h2>
    <div class="stats-grid">
     <div class="stat-card">
      <div class="stat-value" id="total-tasks" aria-label="Total tasks">
       0
      </div>
      <div class="stat-label">
       üìä Total
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-value" id="active-tasks" aria-label="Active tasks">
       0
      </div>
      <div class="stat-label">
       ‚è≥ Active
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-value" id="completed-tasks" aria-label="Completed tasks">
       0
      </div>
      <div class="stat-label">
       ‚úÖ Done
      </div>
     </div>
     <div class="stat-card progress-card">
      <div class="stat-value" id="progress-percent" aria-label="Progress percentage">
       0%
      </div>
      <div class="stat-label">
       üìà Progress
      </div>
      <div class="progress-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
       <div id="progress-bar" class="progress-bar"></div>
      </div>
     </div>
    </div>
   </section>
   
   <div class="content-grid">
     <!-- Sidebar - Add Task Panel -->
    <aside class="sidebar" role="complementary">
     <div class="add-task-panel glass-panel">
      <h2 class="panel-title">Add New Task</h2>
      <form id="task-form" class="task-form" novalidate>
       <div class="form-group"><label for="task-title" class="form-label">Task Title *</label> <input type="text" id="task-title" class="form-input" placeholder="Enter task title..." required aria-describedby="title-error" maxlength="100">
        <div id="title-error" class="error-message" role="alert"></div>
       </div>
       <div class="form-group"><label for="task-description" class="form-label">Description</label> <textarea id="task-description" class="form-input form-textarea" placeholder="Task description..." rows="3" maxlength="500"></textarea>
       </div>
       <div class="form-row">
        <div class="form-group"><label for="task-category" class="form-label">Category</label> <select id="task-category" class="form-input"> <option value="Work">üíº Work</option> <option value="Personal">üè† Personal</option> <option value="Study">üìö Study</option> <option value="Health">üí™ Health</option> <option value="Hobby">üé® Hobby</option> </select>
        </div>
        <div class="form-group"><label for="task-priority" class="form-label">Priority</label> <select id="task-priority" class="form-input"> <option value="Low">üü¢ Low</option> <option value="Medium" selected>üü° Medium</option> <option value="High">üü† High</option> <option value="Urgent">üî¥ Urgent</option> </select>
        </div>
       </div>
       <div class="form-group"><label for="task-deadline" class="form-label">Deadline</label> <input type="datetime-local" id="task-deadline" class="form-input">
       </div>
       <div class="form-group"><label for="task-tags" class="form-label">Tags</label> <input type="text" id="task-tags" class="form-input" placeholder="urgent, meeting, review..." aria-describedby="tags-help"> <small id="tags-help" class="form-help">Separate tags with commas</small>
       </div><button type="submit" class="btn-primary glow-btn" id="add-task-btn"> <span class="btn-text">Add Task</span> <span class="btn-icon" aria-hidden="true">‚ú®</span> </button>
      </form>
     </div>
    </aside>
    <!-- Main Content Area -->
    <section class="content-area"><!-- Search and Filters -->
     <div class="filters-panel glass-panel">
      <div class="search-section">
       <div class="search-container"><input type="text" id="search-input" class="search-input" placeholder="üîç Search tasks..." aria-label="Search tasks"> <button id="clear-search" class="clear-btn" aria-label="Clear search" title="Clear search">
         <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line>
         </svg></button>
       </div>
      </div>
      
      <div class="filter-section"><select id="filter-category" class="filter-select" aria-label="Filter by category"> <option value="">All Categories</option> <option value="Work">üíº Work</option> <option value="Personal">üè† Personal</option> <option value="Study">üìö Study</option> <option value="Health">üí™ Health</option> <option value="Hobby">üé® Hobby</option> </select> <select id="filter-priority" class="filter-select" aria-label="Filter by priority"> <option value="">All Priorities</option> <option value="Urgent">üî¥ Urgent</option> <option value="High">üü† High</option> <option value="Medium">üü° Medium</option> <option value="Low">üü¢ Low</option> </select> <select id="filter-status" class="filter-select" aria-label="Filter by status"> <option value="">All Status</option> <option value="active">‚è≥ Active</option> <option value="completed">‚úÖ Completed</option> <option value="overdue">‚è∞ Overdue</option> </select> <select id="sort-by" class="filter-select" aria-label="Sort tasks"> <option value="created">üìÖ Date Created</option> <option value="deadline">‚è∞ Deadline</option> <option value="priority">üéØ Priority</option> <option value="title">üìù Title</option> </select> <button id="clear-filters" class="btn-secondary" title="Clear all filters"> Clear Filters </button>
      </div>
     </div>
     <!-- Task List -->
     <div class="task-list-container">
      <div class="task-list-header">
       <h2 class="section-title">Your Tasks</h2>
       <div class="task-count" id="task-count" aria-live="polite">
        0 tasks
       </div>
      </div>
      <div id="task-list" class="task-list" role="list" aria-label="Task list"><!-- Tasks will be rendered here -->
      </div>
     </div>
    </section>
   </div>
  </main>
  <!-- Settings Panel -->
  <div id="settings-panel" class="settings-panel" role="dialog" aria-labelledby="settings-title" aria-hidden="true">
   <div class="settings-content glass-panel">
    <div class="settings-header">
     <h2 id="settings-title" class="panel-title">Settings</h2><button id="close-settings" class="close-btn" aria-label="Close settings">
      <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg></button>
    </div>
    <div class="settings-body">
     <div class="settings-section">
      <h3 class="settings-section-title">Data Management</h3>
      <div class="settings-actions"><button id="export-data" class="btn-secondary"> üì§ Export Tasks (JSON) </button>
       <div class="import-section"><input type="file" id="import-file" accept=".json" class="sr-only"> <button id="import-data" class="btn-secondary"> üì• Import Tasks (JSON) </button>
       </div><button id="clear-all-data" class="btn-danger"> üóëÔ∏è Clear All Tasks </button>
      </div>
     </div>
     
     <div class="settings-section">
      <h3 class="settings-section-title">Theme Preview</h3>
      <div class="theme-preview">
       <div class="theme-option" data-theme="light">
        <div class="theme-sample theme-sample-light"></div><span>Light</span>
       </div>
       <div class="theme-option" data-theme="dark">
        <div class="theme-sample theme-sample-dark"></div><span>Dark</span>
       </div>
       <div class="theme-option" data-theme="special">
        <div class="theme-sample theme-sample-special"></div><span>Special</span>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Task Edit Modal -->
  <div id="edit-modal" class="modal" role="dialog" aria-labelledby="edit-title" aria-hidden="true">
   <div class="modal-content glass-panel">
    <div class="modal-header">
     <h2 id="edit-title" class="panel-title">Edit Task</h2><button id="close-edit-modal" class="close-btn" aria-label="Close edit modal">
      <svg width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg></button>
    </div>
    <form id="edit-form" class="task-form" novalidate>
     <div class="form-group"><label for="edit-title-input" class="form-label">Task Title *</label> <input type="text" id="edit-title-input" class="form-input" required maxlength="100">
     </div>
     <div class="form-group"><label for="edit-description" class="form-label">Description</label> <textarea id="edit-description" class="form-input form-textarea" rows="3" maxlength="500"></textarea>
     </div>
     <div class="form-row">
      <div class="form-group"><label for="edit-category" class="form-label">Category</label> <select id="edit-category" class="form-input"> <option value="Work">üíº Work</option> <option value="Personal">üè† Personal</option> <option value="Study">üìö Study</option> <option value="Health">üí™ Health</option> <option value="Hobby">üé® Hobby</option> </select>
      </div>
      <div class="form-group"><label for="edit-priority" class="form-label">Priority</label> <select id="edit-priority" class="form-input"> <option value="Low">üü¢ Low</option> <option value="Medium">üü° Medium</option> <option value="High">üü† High</option> <option value="Urgent">üî¥ Urgent</option> </select>
      </div>
     </div>
     <div class="form-group"><label for="edit-deadline" class="form-label">Deadline</label> <input type="datetime-local" id="edit-deadline" class="form-input">
     </div>
      
      <div class="form-group"><label for="edit-tags" class="form-label">Tags</label> <input type="text" id="edit-tags" class="form-input" placeholder="urgent, meeting, review...">
     </div>
     <div class="modal-actions"><button type="button" id="cancel-edit" class="btn-secondary">Cancel</button> <button type="submit" class="btn-primary glow-btn">Save Changes</button>
     </div>
    </form>
   </div>
  </div><!-- Notifications Container -->
  <div id="notifications" class="notifications-container" aria-live="polite" aria-label="Notifications"></div><!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay" aria-hidden="true">
   <div class="loading-spinner"></div>
  </div>
  <script>
        class TodoApp {
            constructor() {
                this.tasks = [];
                this.filteredTasks = [];
                this.currentTheme = 'dark';
                this.editingTask = null;
                this.searchTimeout = null;
                
                this.init();
            }

            init() {
                this.loadData();
                this.loadTheme();
                this.bindEvents();
                this.renderTasks();
                this.updateStats();
                this.checkOverdueTasks();
                this.loadDemoTasks();
                
                // Set up periodic overdue check
                setInterval(() => this.checkOverdueTasks(), 60000);
            }

            // Data Management
            loadData() {
                try {
                    const saved = localStorage.getItem('todoTasks');
                    this.tasks = saved ? JSON.parse(saved) : [];
                    this.filteredTasks = [...this.tasks];
                } catch (error) {
                    console.error('Error loading tasks:', error);
                    this.tasks = [];
                    this.filteredTasks = [];
                }
            }
            
            saveData() {
                try {
                    localStorage.setItem('todoTasks', JSON.stringify(this.tasks));
                } catch (error) {
                    console.error('Error saving tasks:', error);
                    this.showNotification('Error saving tasks', 'error');
                }
            }

            loadTheme() {
                const saved = localStorage.getItem('todoTheme');
                this.currentTheme = saved || 'dark';
                document.body.className = `theme-${this.currentTheme}`;
                document.getElementById('theme-selector').value = this.currentTheme;
            }

            saveTheme() {
                localStorage.setItem('todoTheme', this.currentTheme);
            }

            loadDemoTasks() {
                if (this.tasks.length === 0) {
                    const demoTasks = [
                        {
                            id: this.generateId(),
                            title: 'Complete project proposal',
                            description: 'Finish the Q4 project proposal and send it to the team for review',
                            category: 'Work',
                            priority: 'High',
                            deadline: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString().slice(0, 16),
                            tags: 'urgent, proposal, Q4',
                            completed: false,
                            createdAt: new Date().toISOString(),
                            updatedAt: new Date().toISOString()
                        },
                        {
                            id: this.generateId(),
                            title: 'Morning workout routine',
                            description: '30 minutes cardio and strength training',
                            category: 'Health',
                            priority: 'Medium',
                            deadline: '',
                            tags: 'fitness, daily, health',
                            completed: true,
                            createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
                            updatedAt: new Date().toISOString()
                        },
                        
                        {
                            id: this.generateId(),
                            title: 'ReadME',
                            description: 'Continue reading chapter 3 about user-centered design principles',
                            category: 'Study',
                            priority: 'Low',
                            deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().slice(0, 16),
                            tags: 'reading, design, UX',
                            completed: false,
                            createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                            updatedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
                        }
                    ];
                    
                    this.tasks = demoTasks;
                    this.filteredTasks = [...this.tasks];
                    this.saveData();
                }
   }

            // Task Operations
            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            }

            addTask(taskData) {
                const task = {
                    id: this.generateId(),
                    title: taskData.title.trim(),
                    description: taskData.description.trim(),
                    category: taskData.category,
                    priority: taskData.priority,
                    deadline: taskData.deadline,
                    tags: taskData.tags.trim(),
                    completed: false,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };

                this.tasks.unshift(task);
                this.saveData();
                this.applyFilters();
                this.updateStats();
                this.showNotification('Task added successfully!', 'success');
                
                // Reset form
                document.getElementById('task-form').reset();
                
                // Focus on title input for quick next entry
                document.getElementById('task-title').focus();
            }
            
            updateTask(taskId, taskData) {
                const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                if (taskIndex === -1) return;

                this.tasks[taskIndex] = {
                    ...this.tasks[taskIndex],
                    title: taskData.title.trim(),
                    description: taskData.description.trim(),
                    category: taskData.category,
                    priority: taskData.priority,
                    deadline: taskData.deadline,
                    tags: taskData.tags.trim(),
                    updatedAt: new Date().toISOString()
                };

                this.saveData();
                this.applyFilters();
                this.updateStats();
                this.showNotification('Task updated successfully!', 'success');
            }

            toggleTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (!task) return;

                task.completed = !task.completed;
                task.updatedAt = new Date().toISOString();

                this.saveData();
                this.applyFilters();
                this.updateStats();
                
                const message = task.completed ? 'Task completed! üéâ' : 'Task reactivated!';
                const type = task.completed ? 'success' : 'info';
                this.showNotification(message, type);

                // Add visual feedback
                const taskCard = document.querySelector(`[data-task-id="${taskId}"]`);
                if (taskCard) {
                    taskCard.classList.add('fade-in');
                    setTimeout(() => taskCard.classList.remove('fade-in'), 300);
                }
            }

            deleteTask(taskId) {
                const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                if (taskIndex === -1) return;

                const task = this.tasks[taskIndex];
                this.tasks.splice(taskIndex, 1);
                
                this.saveData();
                this.applyFilters();
                this.updateStats();
                this.showNotification(`"${task.title}" deleted`, 'info');
            }
            
            // Filtering and Searching
            applyFilters() {
                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                const categoryFilter = document.getElementById('filter-category').value;
                const priorityFilter = document.getElementById('filter-priority').value;
                const statusFilter = document.getElementById('filter-status').value;
                const sortBy = document.getElementById('sort-by').value;

                this.filteredTasks = this.tasks.filter(task => {
                    const matchesSearch = !searchTerm || 
                        task.title.toLowerCase().includes(searchTerm) ||
                        task.description.toLowerCase().includes(searchTerm) ||
                        task.tags.toLowerCase().includes(searchTerm);

                    const matchesCategory = !categoryFilter || task.category === categoryFilter;
                    const matchesPriority = !priorityFilter || task.priority === priorityFilter;
                    
                    let matchesStatus = true;
                    if (statusFilter === 'active') {
                        matchesStatus = !task.completed;
                    } else if (statusFilter === 'completed') {
                        matchesStatus = task.completed;
                    } else if (statusFilter === 'overdue') {
                        matchesStatus = this.isOverdue(task) && !task.completed;
                    }

                    return matchesSearch && matchesCategory && matchesPriority && matchesStatus;
                });

                // Sort tasks
                this.sortTasks(sortBy);
                this.renderTasks();
                this.updateTaskCount();
            }

            sortTasks(sortBy) {
                const priorityOrder = { 'Urgent': 4, 'High': 3, 'Medium': 2, 'Low': 1 };
                
                this.filteredTasks.sort((a, b) => {
                    switch (sortBy) {
                        case 'deadline':
                            if (!a.deadline && !b.deadline) return 0;
                            if (!a.deadline) return 1;
                            if (!b.deadline) return -1;
                            return new Date(a.deadline) - new Date(b.deadline);
                        
                        case 'priority':
                            return priorityOrder[b.priority] - priorityOrder[a.priority];
                            
                            case 'title':
                            return a.title.localeCompare(b.title);
                        
                        case 'created':
                        default:
                            return new Date(b.createdAt) - new Date(a.createdAt);
                    }
                });
            }

            clearFilters() {
                document.getElementById('search-input').value = '';
                document.getElementById('filter-category').value = '';
                document.getElementById('filter-priority').value = '';
                document.getElementById('filter-status').value = '';
                document.getElementById('sort-by').value = 'created';
                this.applyFilters();
            }

            // Rendering
            renderTasks() {
                const taskList = document.getElementById('task-list');
                
                if (this.filteredTasks.length === 0) {
                    taskList.innerHTML = this.getEmptyState();
                    return;
                }

                taskList.innerHTML = this.filteredTasks.map(task => this.createTaskCard(task)).join('');
            }

            createTaskCard(task) {
                const isOverdue = this.isOverdue(task);
                const deadline = task.deadline ? new Date(task.deadline) : null;
                const tags = task.tags ? task.tags.split(',').map(tag => tag.trim()).filter(tag => tag) : [];
                
                const priorityClass = task.priority.toLowerCase();
                const statusClass = task.completed ? 'completed' : (isOverdue ? 'overdue' : '');
                
                return `
                    <div class="task-card ${priorityClass} ${statusClass} fade-in" data-task-id="${task.id}" role="listitem">
                        <div class="task-header">
                            <div class="task-content">
                                <h3 class="task-title">${this.escapeHtml(task.title)}</h3>
                                ${task.description ? `<p class="task-description">${this.escapeHtml(task.description)}</p>` : ''}
                                
                                <div class="task-meta">
                                    <span class="task-badge category">
                                    ${this.getCategoryIcon(task.category)} ${task.category}
                                    </span>
                                    <span class="task-badge priority">
                                        ${this.getPriorityIcon(task.priority)} ${task.priority}
                                    </span>
                                    ${deadline ? `
                                        <span class="task-badge deadline ${isOverdue ? 'overdue' : ''}">
                                            ${isOverdue ? '‚è∞' : 'üìÖ'} ${this.formatDate(deadline)}
                                        </span>
                                    ` : ''}
                                </div>
                                
                                ${tags.length > 0 ? `
                                    <div class="task-tags">
                                        ${tags.map(tag => `<span class="task-tag">#${this.escapeHtml(tag)}</span>`).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="task-actions">
                                <button class="task-action-btn complete" 
                                        onclick="app.toggleTask('${task.id}')"
                                        title="${task.completed ? 'Mark as active' : 'Mark as complete'}"
                                        aria-label="${task.completed ? 'Mark as active' : 'Mark as complete'}">
                                    ${task.completed ? '‚Ü©Ô∏è' : '‚úÖ'}
                                </button>
                                <button class="task-action-btn edit" 
                                        onclick="app.openEditModal('${task.id}')"
                                        title="Edit task"
                                        aria-label="Edit task">
                                    ‚úèÔ∏è
                                </button>
                                <button class="task-action-btn delete" 
                                        onclick="app.confirmDelete('${task.id}')"
                                        title="Delete task"
                                        aria-label="Delete task">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            getEmptyState() {
                const hasFilters = document.getElementById('search-input').value ||
                                  document.getElementById('filter-category').value ||
                                  document.getElementById('filter-priority').value ||
                                  document.getElementById('filter-status').value;

                if (hasFilters) {
                    return `
                        <div class="empty-state">
                            <div class="empty-state-icon">üîç</div>
                            <h3 class="empty-state-title">No tasks found</h3>
                            <p class="empty-state-description">Try adjusting your search or filters</p>
                        </div>
                    `;
                }

                return `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìù</div>
                        <h3 class="empty-state-title">No tasks yet</h3>
                        <p class="empty-state-description">Add your first task to get started!</p>
                    </div>
                `;
            }

            // Statistics
            updateStats() {
                const total = this.tasks.length;
                const completed = this.tasks.filter(t => t.completed).length;
                const active = total - completed;
                const progress = total > 0 ? Math.round((completed / total) * 100) : 0;

                document.getElementById('total-tasks').textContent = total;
                document.getElementById('active-tasks').textContent = active;
                document.getElementById('completed-tasks').textContent = completed;
                document.getElementById('progress-percent').textContent = `${progress}%`;

                // Update progress bar
                const progressBar = document.getElementById('progress-bar');
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);

                // Add glow effect for high progress
                if (progress >= 80) {
                    progressBar.classList.add('glow');
                } else {
                    progressBar.classList.remove('glow');
                }
            }
            
            updateTaskCount() {
                const count = this.filteredTasks.length;
                const total = this.tasks.length;
                const countText = count === total ? 
                    `${count} task${count !== 1 ? 's' : ''}` :
                    `${count} of ${total} task${total !== 1 ? 's' : ''}`;
                
                document.getElementById('task-count').textContent = countText;
            }

            // Utility Functions
            isOverdue(task) {
                if (!task.deadline || task.completed) return false;
                return new Date(task.deadline) < new Date();
            }

            formatDate(date) {
                const now = new Date();
                const diffTime = date - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays === 0) return 'Today';
                if (diffDays === 1) return 'Tomorrow';
                if (diffDays === -1) return 'Yesterday';
                if (diffDays > 0 && diffDays <= 7) return `In ${diffDays} days`;
                if (diffDays < 0 && diffDays >= -7) return `${Math.abs(diffDays)} days ago`;

                return date.toLocaleDateString();
            }

            getCategoryIcon(category) {
                const icons = {
                    'Work': 'üíº',
                    'Personal': 'üè†',
                    'Study': 'üìö',
                    'Health': 'üí™',
                    'Hobby': 'üé®'
                };
                return icons[category] || 'üìã';
            }

            getPriorityIcon(priority) {
                const icons = {
                    'Urgent': 'üî¥',
                    'High': 'üü†',
                    'Medium': 'üü°',
                    'Low': 'üü¢'
                };
                return icons[priority] || '‚ö™';
            }
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // Theme Management
            changeTheme(theme) {
                this.currentTheme = theme;
                document.body.className = `theme-${theme}`;
                this.saveTheme();
                this.showNotification(`Switched to ${theme} theme`, 'info');
            }

            // Modal Management
            openEditModal(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (!task) return;

                this.editingTask = task;
                
                // Populate form
                document.getElementById('edit-title-input').value = task.title;
                document.getElementById('edit-description').value = task.description;
                document.getElementById('edit-category').value = task.category;
                document.getElementById('edit-priority').value = task.priority;
                document.getElementById('edit-deadline').value = task.deadline;
                document.getElementById('edit-tags').value = task.tags;

                this.showModal('edit-modal');
            }

            closeEditModal() {
                this.editingTask = null;
                this.hideModal('edit-modal');
                document.getElementById('edit-form').reset();
            }

            showModal(modalId) {
                const modal = document.getElementById(modalId);
                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
                
                // Focus management
                const firstInput = modal.querySelector('input, textarea, select, button');
                if (firstInput) firstInput.focus();
                
                // Trap focus
                this.trapFocus(modal);
            }

            hideModal(modalId) {
                const modal = document.getElementById(modalId);
                modal.classList.remove('active');
                modal.setAttribute('aria-hidden', 'true');
            }
            
            trapFocus(element) {
                const focusableElements = element.querySelectorAll(
                    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
                );
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                element.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        if (e.shiftKey) {
                            if (document.activeElement === firstElement) {
                                lastElement.focus();
                                e.preventDefault();
                            }
                        } else {
                            if (document.activeElement === lastElement) {
                                firstElement.focus();
                                e.preventDefault();
                            }
                        }
                    }
                    
                    if (e.key === 'Escape') {
                        this.hideModal(element.id);
                    }
                });
            }

            // Settings Panel
            toggleSettings() {
                const panel = document.getElementById('settings-panel');
                const isActive = panel.classList.contains('active');
                
                if (isActive) {
                    panel.classList.remove('active');
                    panel.setAttribute('aria-hidden', 'true');
                } else {
                    panel.classList.add('active');
                    panel.setAttribute('aria-hidden', 'false');
                }
            }

            // Data Import/Export
            exportData() {
                try {
                    const dataStr = JSON.stringify(this.tasks, null, 2);
                    const dataBlob = new Blob([dataStr], { type: 'application/json' });
                    const url = URL.createObjectURL(dataBlob);
                    
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `todo-tasks-${new Date().toISOString().split('T')[0]}.json`;
                    link.click();
                    
                    URL.revokeObjectURL(url);
                    this.showNotification('Tasks exported successfully!', 'success');
                } catch (error) {
                    console.error('Export error:', error);
                    this.showNotification('Failed to export tasks', 'error');
                }
            }

            async importData(file) {
                try {
                    const text = await file.text();
                    const importedTasks = JSON.parse(text);
                    
                    if (!Array.isArray(importedTasks)) {
                        throw new Error('Invalid file format');
                    }

                    // Validate task structure
                    const validTasks = importedTasks.filter(task => 
                        task && typeof task === 'object' && task.title && task.id
                    );

                    if (validTasks.length === 0) {
                        throw new Error('No valid tasks found');
                    }

                    // Merge with existing tasks (avoid duplicates)
                    const existingIds = new Set(this.tasks.map(t => t.id));
                    const newTasks = validTasks.filter(task => !existingIds.has(task.id));
                    
                    this.tasks = [...this.tasks, ...newTasks];
                    this.saveData();
                    this.applyFilters();
                    this.updateStats();
                    
                    this.showNotification(
                        `Imported ${newTasks.length} new tasks (${validTasks.length - newTasks.length} duplicates skipped)`,
                        'success'
                    );
                } catch (error) {
                    console.error('Import error:', error);
                    this.showNotification('Failed to import tasks. Please check the file format.', 'error');
                }
            }

            clearAllData() {
                if (this.tasks.length === 0) {
                    this.showNotification('No tasks to clear', 'info');
                    return;
                }
                
                // Simple confirmation without browser dialog
                const button = document.getElementById('clear-all-data');
                const originalText = button.textContent;
                
                button.textContent = 'üóëÔ∏è Click again to confirm';
                button.style.background = 'var(--danger)';
                
                const confirmHandler = () => {
                    this.tasks = [];
                    this.filteredTasks = [];
                    this.saveData();
                    this.renderTasks();
                    this.updateStats();
                    this.showNotification('All tasks cleared', 'info');
                    this.toggleSettings();
                    
                    // Reset button
                    button.textContent = originalText;
                    button.style.background = '';
                    button.removeEventListener('click', confirmHandler);
                };

                button.addEventListener('click', confirmHandler, { once: true });
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.removeEventListener('click', confirmHandler);
                }, 3000);
            }

            // Delete Confirmation
            confirmDelete(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (!task) return;

                // Simple inline confirmation
                const taskCard = document.querySelector(`[data-task-id="${taskId}"]`);
                const deleteBtn = taskCard.querySelector('.task-action-btn.delete');
                const originalContent = deleteBtn.innerHTML;
                
                deleteBtn.innerHTML = '‚ùå';
                deleteBtn.style.background = 'var(--danger)';
                deleteBtn.title = 'Click again to confirm deletion';
                
                const confirmHandler = () => {
                    this.deleteTask(taskId);
                    deleteBtn.removeEventListener('click', confirmHandler);
                };

                deleteBtn.addEventListener('click', confirmHandler, { once: true });
                
                 // Reset after 3 seconds
                setTimeout(() => {
                    deleteBtn.innerHTML = originalContent;
                    deleteBtn.style.background = '';
                    deleteBtn.title = 'Delete task';
                    deleteBtn.removeEventListener('click', confirmHandler);
                }, 3000);
            }

            // Notifications
            showNotification(message, type = 'info') {
                const container = document.getElementById('notifications');
                const notification = document.createElement('div');
                
                const icons = {
                    success: '‚úÖ',
                    error: '‚ùå',
                    warning: '‚ö†Ô∏è',
                    info: '‚ÑπÔ∏è'
                };

                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-icon">${icons[type] || icons.info}</div>
                    <div class="notification-content">
                        <div class="notification-message">${this.escapeHtml(message)}</div>
                    </div>
                    <button class="notification-close" aria-label="Close notification">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                `;

                container.appendChild(notification);

                // Show notification
                setTimeout(() => notification.classList.add('show'), 100);

                // Auto hide
                const autoHideTimeout = setTimeout(() => {
                    this.hideNotification(notification);
                }, 4000);

                // Manual close
                const closeBtn = notification.querySelector('.notification-close');
                closeBtn.addEventListener('click', () => {
                    clearTimeout(autoHideTimeout);
                    this.hideNotification(notification);
                });
                
                // Keyboard support
                notification.setAttribute('tabindex', '0');
                notification.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' || e.key === 'Enter') {
                        clearTimeout(autoHideTimeout);
                        this.hideNotification(notification);
                    }
                });
            }

            hideNotification(notification) {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }

            // Overdue Tasks Check
            checkOverdueTasks() {
                const overdueTasks = this.tasks.filter(task => this.isOverdue(task));
                
                if (overdueTasks.length > 0) {
                    const message = overdueTasks.length === 1 ? 
                        `You have 1 overdue task: "${overdueTasks[0].title}"` :
                        `You have ${overdueTasks.length} overdue tasks`;
                    
                    this.showNotification(message, 'warning');
                }
            }

            // Form Validation
            validateTaskForm(formData) {
                const errors = {};

                if (!formData.title.trim()) {
                    errors.title = 'Title is required';
                } else if (formData.title.length > 100) {
                    errors.title = 'Title must be less than 100 characters';
                }

                if (formData.description.length > 500) {
                    errors.description = 'Description must be less than 500 characters';
                }

                return errors;
            }

            showFormErrors(errors) {
                // Clear previous errors
                document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
                document.querySelectorAll('.form-input').forEach(el => el.classList.remove('error'));
                
                // Show new errors
                Object.keys(errors).forEach(field => {
                    const errorEl = document.getElementById(`${field}-error`);
                    const inputEl = document.getElementById(`task-${field}`) || document.getElementById(`edit-${field}-input`);
                    
                    if (errorEl) errorEl.textContent = errors[field];
                    if (inputEl) inputEl.classList.add('error');
                });
            }

            // Event Binding
            bindEvents() {
                // Task form submission
                document.getElementById('task-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = {
                        title: document.getElementById('task-title').value,
                        description: document.getElementById('task-description').value,
                        category: document.getElementById('task-category').value,
                        priority: document.getElementById('task-priority').value,
                        deadline: document.getElementById('task-deadline').value,
                        tags: document.getElementById('task-tags').value
                    };

                    const errors = this.validateTaskForm(formData);
                    if (Object.keys(errors).length > 0) {
                        this.showFormErrors(errors);
                        return;
                    }

                    this.addTask(formData);
                });

                // Edit form submission
                document.getElementById('edit-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    if (!this.editingTask) return;

                    const formData = {
                        title: document.getElementById('edit-title-input').value,
                        description: document.getElementById('edit-description').value,
                        category: document.getElementById('edit-category').value,
                        priority: document.getElementById('edit-priority').value,
                        deadline: document.getElementById('edit-deadline').value,
                        tags: document.getElementById('edit-tags').value
                    };

                    const errors = this.validateTaskForm(formData);
                    if (Object.keys(errors).length > 0) {
                      this.showFormErrors(errors);
                        return;
                    }

                    this.updateTask(this.editingTask.id, formData);
                    this.closeEditModal();
                });

                // Search with debounce
                document.getElementById('search-input').addEventListener('input', (e) => {
                    clearTimeout(this.searchTimeout);
                    this.searchTimeout = setTimeout(() => {
                        this.applyFilters();
                    }, 250);
                });

                // Clear search
                document.getElementById('clear-search').addEventListener('click', () => {
                    document.getElementById('search-input').value = '';
                    this.applyFilters();
                });

                // Filters
                ['filter-category', 'filter-priority', 'filter-status', 'sort-by'].forEach(id => {
                    document.getElementById(id).addEventListener('change', () => this.applyFilters());
                });

                // Clear filters
                document.getElementById('clear-filters').addEventListener('click', () => this.clearFilters());

                // Theme selector
                document.getElementById('theme-selector').addEventListener('change', (e) => {
                    this.changeTheme(e.target.value);
                });

                // Settings
                document.getElementById('settings-btn').addEventListener('click', () => this.toggleSettings());
                document.getElementById('close-settings').addEventListener('click', () => this.toggleSettings());

                // Modal controls
                document.getElementById('close-edit-modal').addEventListener('click', () => this.closeEditModal());
                document.getElementById('cancel-edit').addEventListener('click', () => this.closeEditModal());

                // Data management
                document.getElementById('export-data').addEventListener('click', () => this.exportData());
                
                document.getElementById('import-data').addEventListener('click', () => {
                    document.getElementById('import-file').click();
                });
                
                document.getElementById('import-file').addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        this.importData(file);
                        e.target.value = ''; // Reset file input
                    }
                });

                document.getElementById('clear-all-data').addEventListener('click', () => this.clearAllData());

                // Theme preview
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.addEventListener('click', () => {
                        const theme = option.dataset.theme;
                        this.changeTheme(theme);
                        document.getElementById('theme-selector').value = theme;
                    });
                });

                // Close modals on outside click
                document.getElementById('edit-modal').addEventListener('click', (e) => {
                    if (e.target.id === 'edit-modal') {
                        this.closeEditModal();
                    }
                });

                document.getElementById('settings-panel').addEventListener('click', (e) => {
                    if (e.target.id === 'settings-panel') {
                        this.toggleSettings();
                    }
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Ctrl/Cmd + N: New task (focus title input)
                    if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                        e.preventDefault();
                        document.getElementById('task-title').focus();
                    }
                    
                    // Ctrl/Cmd + F: Focus search
                    if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                        e.preventDefault();
                        document.getElementById('search-input').focus();
                    }
                    
                    // Escape: Close modals/panels
                    if (e.key === 'Escape') {
                        if (document.getElementById('edit-modal').classList.contains('active')) {
                            this.closeEditModal();
                        } else if (document.getElementById('settings-panel').classList.contains('active')) {
                            this.toggleSettings();
                        }
                    }
                });

                // Handle form input changes for real-time validation
                document.getElementById('task-title').addEventListener('input', () => {
                    document.getElementById('title-error').textContent = '';
                    document.getElementById('task-title').classList.remove('error');
                });
            }
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new TodoApp();
        });

        // Service Worker Registration (optional, for PWA capabilities)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
    
     <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997a9101a00e3fca',t:'MTc2MTk5MTQ1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
